<!-- templates/personnel_info.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Personnel Records</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: url("{{ url_for('static', filename='assets/img/green domain.png') }}") no-repeat center center fixed;
            background-size: cover;
            color: #0d3b2e;
            font-family: 'Segoe UI', sans-serif;
        }

        /* Home button style */
        .header-home-btn {
            position: fixed;
            top: 12px;
            right: 12px;
            background-color: #004d40; /* Dark green */
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 14px;
            font-family: Arial, sans-serif;
            display: flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            box-shadow: 0 2px 6px rgba(0, 50, 0, 0.2);
            transition: background 0.2s ease;
            z-index: 999;
        }
        .header-home-btn:hover {
            background-color: #00695c;
            text-decoration: none;
        }
        .header-home-btn svg {
            width: 16px;
            height: 16px;
            fill: white;
        }

        /* Section container */
        .card-container {
            background-color: rgba(255, 255, 255, 0.88);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 6px 14px rgba(0, 50, 0, 0.15);
        }

        /* Table styles */
        .table thead {
            background-color: #2e8b57; /* green header */
            color: white;
        }
        .table-striped tbody tr:nth-of-type(odd) {
            background-color: rgba(46, 139, 87, 0.1);
        }

        /* Buttons */
        .btn-success {
            background-color: #00a896;
            border-color: #00a896;
        }
        .btn-success:hover {
            background-color: #007f6d;
            border-color: #007f6d;
        }
        .btn-primary {
            background-color: #2e8b57;
            border-color: #2e8b57;
        }
        .btn-primary:hover {
            background-color: #1f6540;
            border-color: #1f6540;
        }
        .btn-secondary {
            background-color: #004d40;
            border-color: #004d40;
        }
        .btn-secondary:hover {
            background-color: #00352d;
            border-color: #00352d;
        }
        .btn-danger {
            background-color: #b71c1c;
            border-color: #b71c1c;
        }
        .btn-danger:hover {
            background-color: #8b1313;
            border-color: #8b1313;
        }
    </style>
</head>
<body class="container py-5">

    <!-- Fixed Home Button -->
    <a href="{{ url_for('home') }}" class="header-home-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
            <path d="M541 229.16l-61-53.51V56a8 8 0 0 0-8-8h-40a8 8 0 0 0-8 8v72.59l-84.69-74.19a35.36 35.36 0 0 0-46.61 0L35 229.16a12 12 0 0 0-1.6 17l25.5 28.43a12 12 0 0 0 17 1.6l21.1-18.47V456a24 24 0 0 0 24 24h112a24 24 0 0 0 24-24V344h64v112a24 24 0 0 0 24 24h112a24 24 0 0 0 24-24V257.75l21.1 18.47a12 12 0 0 0 17-1.6l25.5-28.43a12 12 0 0 0-1.6-17z"/>
        </svg>
        Home
    </a>

    <div class="card-container">
            <h2 class="mb-4 text-success">Personnel Records</h2>
            <a href="/personnel/add" class="btn btn-success mb-3">‚ûï Add Personnel</a>

            <!-- Search and PDF Download -->
            <form method="POST" action="{{ url_for('mongo.download_personnel_report') }}" class="d-flex align-items-center mb-3">
                <input type="text" id="searchInput" name="search" class="form-control me-2" placeholder="üîç Search by any field..." onkeyup="filterTable()">
                <button type="submit" class="btn btn-outline-primary">‚¨áÔ∏è Download PDF</button>
            </form>

            <table class="table table-bordered table-hover table-striped searchable-table">
                <thead>
                    <tr>
                        <th>Employee ID</th>
                        <th>Name</th>
                        <th>Aadhaar</th>
                        <th>PAN</th>
                        <th>DOB</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for p in personnel %}
                    <tr>
                        <td>{{ p.employee_id }}</td>
                        <td>{{ p.name }}</td>
                        <td>{{ p.aadhaar }}</td>
                        <td>{{ p.pan }}</td>
                        <td>{{ p.dob }}</td>
                        <td>
                            <a href="/personnel/update/{{ p._id }}" class="btn btn-sm btn-primary">Edit</a>
                            <a href="/personnel/delete/{{ p._id }}" class="btn btn-sm btn-danger">Delete</a>
                            <a href="/personnel/{{ p._id }}" class="btn btn-sm btn-secondary">JSON</a>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="6" class="text-center text-muted">No personnel records found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
    </div>

</body>
<script>
function filterTable() {
    const query = document.getElementById("searchInput").value.toLowerCase();
    document.querySelectorAll(".searchable-table tbody tr").forEach(row => {
        row.style.display = row.innerText.toLowerCase().includes(query) ? "" : "none";
    });
}
</script>
</html>
