<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MongoDB Personnel Analytics</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">

  <h2 class="mb-4">📊 MongoDB Personnel Analytics</h2>

  <!-- Missing PAN -->
  <div class="mb-5">
    <h4>🧾 Missing PAN Records</h4>
    {% if missing_pan_data %}
      <ul class="list-group">
        {% for name, id in missing_pan_data %}
          <li class="list-group-item">{{ name }} (ID: {{ id }})</li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-muted">✅ No records missing PAN.</p>
    {% endif %}
  </div>

  <!-- Qualification Count -->
  <div class="mb-5">
    <h4>🎓 Qualification Counts</h4>
    {% if qualification_data %}
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>Qualification</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody>
          {% for qualification, count in qualification_data %}
          <tr>
            <td>{{ qualification }}</td>
            <td>{{ count }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-muted">No data available.</p>
    {% endif %}
  </div>

  <!-- City-wise Count -->
  <div class="mb-5">
    <h4>🏙 City-wise Distribution</h4>
    {% if city_data %}
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>City</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody>
          {% for city, count in city_data %}
          <tr>
            <td>{{ city }}</td>
            <td>{{ count }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-muted">No data available.</p>
    {% endif %}
  </div>

  <!-- State-wise Count -->
  <div class="mb-5">
    <h4>🏞 State-wise Distribution</h4>
    {% if state_data %}
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>State</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody>
          {% for state, count in state_data %}
          <tr>
            <td>{{ state }}</td>
            <td>{{ count }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-muted">No data available.</p>
    {% endif %}
  </div>

  <!-- Blood Group -->
  <div class="mb-5">
    <h4>🩸 Blood Group Distribution</h4>
    {% if blood_data %}
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>Blood Group</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody>
          {% for bg, count in blood_data %}
          <tr>
            <td>{{ bg }}</td>
            <td>{{ count }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-muted">No data available.</p>
    {% endif %}
  </div>

  <!-- Gender Distribution -->
  <div class="mb-5">
    <h4>🚻 Gender Distribution</h4>
    {% if gender_data %}
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>Gender</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody>
          {% for gender, count in gender_data %}
          <tr>
            <td>{{ gender }}</td>
            <td>{{ count }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-muted">No data available.</p>
    {% endif %}
  </div>

</body>
</html>
