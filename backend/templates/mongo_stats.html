<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MongoDB Personnel Analytics</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">

  <h2 class="mb-4">📊 MongoDB Personnel Analytics</h2>

  <!-- Missing PAN -->
  <div class="mb-5">
    <h4>🧾 Missing PAN Records</h4>
    {% if missing_pan_data %}
      <ul class="list-group">
        {% for name, id in missing_pan_data %}
          <li class="list-group-item">{{ name }} (ID: {{ id }})</li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-muted">✅ No records missing PAN.</p>
    {% endif %}
  </div>

  <!-- Qualification Count -->
  <div class="mb-5">
    <h4>🎓 Qualification Counts</h4>
    {% if qualification_data %}
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>Qualification</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody>
          {% for q in qualification_data %}
          <tr>
            <td>{{ q._id }}</td>
            <td>{{ q.count }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-muted">No data available.</p>
    {% endif %}
  </div>

  <!-- City-wise Count -->
  <div class="mb-5">
    <h4>🏙 City-wise Distribution</h4>
    {% if city_data %}
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>City</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody>
          {% for city in city_data %}
          <tr>
            <td>{{ city._id or "Unknown" }}</td>
            <td>{{ city.count }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-muted">No data available.</p>
    {% endif %}
  </div>

  <!-- State-wise Count -->
  <div class="mb-5">
    <h4>🏞 State-wise Distribution</h4>
    {% if state_data %}
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>State</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody>
          {% for state in state_data %}
          <tr>
            <td>{{ state._id or "Unknown" }}</td>
            <td>{{ state.count }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-muted">No data available.</p>
    {% endif %}
  </div>

  <!-- Gender Distribution -->
  <div class="mb-5">
    <h4>🚻 Gender Distribution</h4>
    <table class="table table-bordered">
      <thead class="table-light">
        <tr>
          <th>Gender</th>
          <th>Count</th>
          <th>Percentage</th>
        </tr>
